# Kling 3.0 の課金方式メモ

## 結論（ざっくり）

- “特殊”というより、**クレジット制**または **秒課金（解像度/音声で単価が変動）**のどちらかで提供されることが多いです。
- ただし **公式 Kling** と **第三者ゲートウェイ（PiAPI / klingapi.com 等）** で課金体系が別物になりやすいので、まず「どのAPIを叩いているか」を確定してください。

## 公式 API でよくある落とし穴（実運用メモ）

- 公式側は「**アカウントの課金状態**」と「**リソースパック（事前購入）**」の両方が出てくることがあります。
- エラーとしては「残高不足」「リソースパック残量不足」「レート制限（課金形態に紐づく）」のような扱いで返ることがあり、UI側の課金状態確認が必要になります。

## 公式サービス側（クレジット制の例）

公開サイト上ではサブスク＋クレジット、同時実行数、最大秒数、透かし有無などがプラン差分になっている例が多いです。

- 参考（第三者: kling3-ai.com の pricing ページ）: https://www.kling3-ai.com/pricing

## APIゲートウェイ側（秒課金の例）

ゲートウェイによっては「解像度 × 音声on/off × 秒数」で USD 課金の形が提示されます。

- 参考（第三者: PiAPI の Kling 3.0 Omni）: https://piapi.ai/docs/kling-api/kling-3-omni-api

## このrepoでコストを読みやすくするポイント

- `duration_seconds`（manifest / timestamp 由来）がコストに直結するケースが多い
- `resolution` と（あれば）audio/lip-sync の有無で単価が変動しやすい
- `scripts/generate-assets-from-manifest.py --log-prompts` と provider の JSON ログを残して、後で「何秒を何本生成したか」を追えるようにする

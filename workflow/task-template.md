# タスク: [タスク名]

## メタ情報
- **タスクID**: YYYY-MM-DD_[short-name]
- **作成日**: YYYY-MM-DD
- **担当**: [開発者名]
- **ステータス**: [起票/実装中/レビュー中/完了/保留]
- **優先度**: [高/中/低]
- **見積もり**: [小/中/大]

---

## 1. 背景 / 目的

### なぜこのタスクが必要なのか？
<!--
- ビジネス要求
- ユーザーからのフィードバック
- 技術的負債の解消
- セキュリティ対応
など、このタスクが生まれた背景を説明
-->

### 期待される効果
<!--
- ユーザー体験の向上
- パフォーマンス改善
- 開発効率の向上
- セキュリティ強化
など、このタスクで得られる効果
-->

---

## 2. スコープ（何をやる / 何をやらない）

### ✅ やること（In Scope）
<!--
このタスクで実装する内容を具体的に列挙
- [ ] 項目1
- [ ] 項目2
- [ ] 項目3
-->

### ❌ やらないこと（Out of Scope）
<!--
このタスクでは対応しない内容を明示
- 将来的な拡張
- 関連するが別タスクとすべき項目
- 意図的に除外した機能
-->

---

## 3. 影響範囲

### 変更対象
- [ ] フロントエンド (`frontend/`)
- [ ] バックエンド (`backend/`)
- [ ] インフラ (`docker/`, `.github/workflows/`)
- [ ] ドキュメント (`README.md`, `CLAUDE.md`)
- [ ] 環境変数 (`.env.example`)
- [ ] データベース（マイグレーション）
- [ ] その他:

### 依存関係
<!--
- このタスクが依存する他のタスク
- このタスクに依存する他のタスク
- 外部サービスとの連携
-->

---

## 4. 設計方針 / アーキテクチャ判断

### 技術選択
<!--
- 採用する技術スタック
- ライブラリ/フレームワークの選定理由
- 既存パターンとの整合性
-->

### 設計判断
<!--
- なぜこのアプローチを選んだのか？
- 検討した他の選択肢とその却下理由
- トレードオフ
-->

### セキュリティ考慮事項
<!--
- 認証/認可への影響
- データ保護（PII, 機密情報）
- 入力バリデーション
- OWASP Top 10 への対応
-->

---

## 5. 変更予定ファイル

### 新規作成
```
- path/to/new/file1.tsx
- path/to/new/file2.py
```

### 変更
```
- path/to/existing/file1.tsx  # 変更内容の概要
- path/to/existing/file2.py   # 変更内容の概要
```

### 削除
```
- path/to/deprecated/file.tsx  # 削除理由
```

---

## 6. テスト計画

### ユニットテスト
<!--
- 新規作成する関数/コンポーネントのテスト
- 既存テストの更新
-->
- [ ] `test/unit/xxx.test.ts`
- [ ] `test/unit/yyy.test.py`

### 統合テスト
<!--
- API連携のテスト
- データベース操作のテスト
-->
- [ ] `test/integration/xxx.test.ts`

### E2Eテスト（該当する場合）
<!--
- ユーザーフローのテスト（Playwright等）
-->
- [ ] `frontend/tests/e2e/xxx.spec.ts`

### 手動テスト手順
<!--
1. Docker環境を起動
2. http://localhost:3000 にアクセス
3. XXXボタンをクリック
4. 期待結果: YYYが表示される
-->

---

## 7. 受け入れ条件（Definition of Done）

- [ ] 実装が完了している
- [ ] ユニットテストが通る（カバレッジ XX% 以上）
- [ ] 統合テストが通る
- [ ] E2Eテストが通る（該当する場合）
- [ ] Linter/Formatter エラーがない
- [ ] 型チェックエラーがない
- [ ] セキュリティスキャンをパス
- [ ] レビューテンプレートでレビュー済み
- [ ] ドキュメントを更新（README, CLAUDE.md等）
- [ ] マイグレーションを作成・適用（該当する場合）
- [ ] 環境変数の更新（.env.example）
- [ ] デプロイ手順を確認（本番環境への影響）

---

## 8. リスク / 既知の不安要素

### 技術的リスク
<!--
- パフォーマンス低下の可能性
- 互換性の問題
- 未検証の技術の使用
-->

### ビジネスリスク
<!--
- ユーザー体験への悪影響
- ダウンタイムの可能性
-->

### 依存リスク
<!--
- 外部サービスの可用性
- サードパーティライブラリの脆弱性
-->

### 軽減策
<!--
各リスクに対する対応策
-->

---

## 9. 実装手順（サブタスク）

### フェーズ1: 準備
- [ ] ブランチ作成: `git checkout -b feature/xxx`
- [ ] 環境変数の確認
- [ ] 依存パッケージのインストール

### フェーズ2: バックエンド実装（該当する場合）
- [ ] モデル定義
- [ ] API エンドポイント実装
- [ ] バリデーション実装
- [ ] ユニットテスト作成

### フェーズ3: フロントエンド実装（該当する場合）
- [ ] コンポーネント実装
- [ ] API連携実装
- [ ] エラーハンドリング
- [ ] ユニットテスト作成

### フェーズ4: 統合
- [ ] フロント↔バック連携確認
- [ ] E2Eテスト作成
- [ ] 手動テスト

### フェーズ5: レビュー・仕上げ
- [ ] コードレビュー（review_template.md使用）
- [ ] ドキュメント更新
- [ ] CHANGELOG更新（該当する場合）

### フェーズ6: デプロイ準備
- [ ] マイグレーション確認
- [ ] 環境変数の本番設定確認
- [ ] ロールバックプラン作成

---

## 10. 相談事項 / 未決定事項

### 決定が必要な項目
<!--
- UIデザインの方向性
- APIエンドポイントの命名
- データベーススキーマの変更
- パフォーマンス要件
-->

### 質問
<!--
- XXXの場合、どうすべきか？
- YYYの仕様は？
-->

---

## 11. 参考資料

### 関連Issue/PR
- Issue #XXX
- PR #YYY

### 外部ドキュメント
- [Next.js Documentation](https://nextjs.org/docs)
- [Django REST Framework](https://www.django-rest-framework.org/)

### 参考実装
- 類似機能: `path/to/similar/feature.tsx`

---

## 12. 実装ログ（実装後に記入）

### 実装日時
- 開始: YYYY-MM-DD HH:MM
- 完了: YYYY-MM-DD HH:MM

### 実施内容
<!--
実際に実装した内容をサマリー
-->

### 変更ファイル
```
git diff --name-only main...feature/xxx
```

### テスト結果
```bash
# ユニットテスト
npm run test
# 統合テスト
npm run test:integration
# E2Eテスト
npm run test:e2e
```

### 発生した問題と解決策
<!--
実装中に発生した問題と、その解決方法
-->

### 残課題（あれば）
<!--
このタスクで対応しきれなかった項目
→ 新規タスクとして起票
-->

---

## 13. レビュー結果（レビュー後に記入）

### レビュー実施日
YYYY-MM-DD

### レビュー結果サマリー
- Blocker: X件
- High: Y件
- Medium: Z件
- Low: W件

### 対応状況
- [ ] 全ての指摘に対応済み
- [ ] レビュアー承認済み

### レビューファイル
`prompts/reviews/YYYY-MM-DD_[short-name]_review.md`

---

## 14. デプロイ情報（デプロイ後に記入）

### デプロイ日時
- ステージング: YYYY-MM-DD HH:MM
- 本番: YYYY-MM-DD HH:MM

### デプロイコマンド
```bash
# ステージング
gcloud run deploy instagram-reply-backend-staging --source .

# 本番
gcloud run deploy instagram-reply-backend --source .
```

### デプロイ後の確認事項
- [ ] ヘルスチェック通過
- [ ] 主要機能の動作確認
- [ ] ログにエラーがないことを確認
- [ ] モニタリングメトリクスが正常

### ロールバックプラン
```bash
# 前回のリビジョンに戻す
gcloud run services update-traffic instagram-reply-backend \
  --to-revisions=PREVIOUS_REVISION=100
```

---

## 15. ふりかえり（完了後に記入）

### うまくいったこと
<!--
- 効率的だった手法
- 再利用できるパターン
-->

### 改善点
<!--
- 次回気をつけること
- プロセスの改善提案
-->

### 学び
<!--
- 新しく学んだ技術
- 得られた知見
-->
